!function(){"use strict";var a="nes.imagecache::";angular.module("nes.imagecache",[]),angular.module("nes.imagecache").directive("imgCached",["$timeout",function(a){function b(a,b){return"undefined"!=typeof b.background?'<span ng-style="fullBackground"></span>':"<img />"}return{restrict:"E",scope:{watchUrl:"="},template:b,replace:!0,link:function(b,c,d){function e(){d.watchUrl?b.$watch("watchUrl",function(a,b){"undefined"!=typeof d.background&&c.removeAttr("data-old-background"),f(a)}):f(d.url)}function f(a){return"undefined"==typeof a?void console.info("No src found for image"):void ImgCache.isCached(a,function(b,c){c?g(a)():QImgCache.cacheFile(a).then(g(a))})}function g(e){return function(){"undefined"!=typeof d.background?QImgCache.getCachedFileURL(e).then(function(c){a(function(){b.fullBackground={"background-position":"center","background-size":"cover","background-repeat":"no-repeat","background-image":'url("'+c+'")'}})}):QImgCache.useCachedFileWithSource(c,e)}}"undefined"!=typeof ionic?ionic.Platform.ready(e):e()}}}]),angular.module("nes.imagecache").service("$imageCache",["$q","$rootScope",function(b,c){function d(d){if("undefined"==typeof d||"object"==typeof d&&"[object Array]"!=Object.prototype.toString.call(d))throw"Only 'string' and ['string'] are accepted";"string"==typeof d&&(d=[d]);var e=[];angular.forEach(d,function(a){angular.isDefined(a)&&this.push(a)},e);var f=b.defer(),g=[];return angular.forEach(e,function(a){g.push(QImgCache.cacheFile(a))}),b.all(g).then(function(){c.$broadcast(a+"refresh"),f.resolve(arguments)},function(){f.reject(arguments)}),f.promise}function e(a){return"string"==typeof a?QImgCache.removeFile(a):QImgCache.clearCache()}function f(){c.$emit(a+"refresh")}function g(){ImgCache.options.debug=!0,ImgCache.options.chromeQuota=52428800}return{cache:d,clear:e,refresh:f,init:g}}])}();