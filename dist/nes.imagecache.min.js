!function(){"use strict";var a="nes.imagecache::";angular.module("nes.imagecache",[]),angular.module("nes.imagecache").directive("imgCached",function(){function a(a,b){return"undefined"!=typeof b.background?'<span ng-style="fullBackground"></span>':"<img />"}return{restrict:"E",scope:{watchUrl:"="},template:a,replace:!0,link:function(a,b,c){function d(){a.watchUrl?a.$watch("watchUrl",function(a,d){"undefined"!=typeof c.background&&b.removeAttr("data-old-background"),e(a)}):e(c.url)}function e(b){return"undefined"==typeof b?void console.info("No src found for image"):("undefined"!=typeof c.background&&(a.fullBackground={"background-position":"center","background-size":"cover","background-repeat":"no-repeat","background-image":'url("'+b+'")'}),void f(b))}function f(a){"undefined"!=typeof c.background?QImgCache.useCachedBackground(b):QImgCache.useCachedFileWithSource(b,a)}"undefined"!=typeof ionic?ionic.Platform.ready(d):d()}}}),angular.module("nes.imagecache").service("$imageCache",["$q","$rootScope",function(b,c){function d(d){if("undefined"==typeof d||"object"==typeof d&&"[object Array]"!=Object.prototype.toString.call(d))throw"Only 'string' and ['string'] are accepted";"string"==typeof d&&(d=[d]);var e=[];angular.forEach(d,function(a){angular.isDefined(a)&&this.push(a)},e);var f=b.defer(),g=[];return angular.forEach(e,function(a){g.push(QImgCache.cacheFile(a))}),b.all(g).then(function(){c.$broadcast(a+"refresh"),f.resolve(arguments)},function(){f.reject(arguments)}),f.promise}function e(a){return"string"==typeof a?QImgCache.removeFile(a):QImgCache.clearCache()}function f(){c.$emit(a+"refresh")}function g(){ImgCache.options.debug=!0,ImgCache.options.chromeQuota=52428800}return{cache:d,clear:e,refresh:f,init:g}}])}();